@model EDergi.Domain.Entitites.Magazine


<div class="container mt-5">
    <div class="row g-4">
        <!-- SOL: Kapak ve Temel Bilgiler -->
        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <img src="@Model.ImageUrl" alt="@Model.Title" class="card-img-top p-3 rounded-4">
                <div class="card-body text-center">
                    <h3 class="text-primary">@Model.Title</h3>
                    <span class="badge bg-secondary">ISSN: @Model.ISSN</span>

                    @* <!-- Takipçi ve Görüntülenme İstatistikleri -->
                    <div class="d-flex justify-content-center gap-3 mt-3">
                        <div class="text-center">
                            <div class="fw-bold">@(Model.ViewStats?.FavoriteCount ?? 5)</div>
                            <small>Takipçi</small>
                        </div>
                        <div class="text-center">
                            <div class="fw-bold">@(Model.ViewStats?.ViewCount ?? 6)</div>
                            <small>Görüntülenme</small>
                        </div>
                    </div> *@
                </div>
            </div>
        </div>

        <!-- SAĞ: Detaylar ve Hakkında -->
        <div class="col-md-8">
            <div class="row g-4">
                <!-- Üst Bilgiler -->
                <div class="col-12">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <p class="text-muted">@Model.Description</p>
                            <ul class="list-unstyled">
                                <li><b>Başlangıç:</b> @Model.StartDate.ToString("MMMM yyyy")</li>
                                <li><b>Periyot:</b> @Model.Period</li>
                                <li><b>Dil:</b> Türkçe</li>
                            </ul>
                            <a href="/MakaleGonder" class="btn btn-primary">Makale Gönder</a>
                        </div>
                    </div>
                </div>

                <!-- HAKKINDA ve SON SAYILAR (YAN YANA) -->
                <div class="col-md-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="text-primary">Hakkında</h5>
                            <p>@Model.Description</p>

                            <div class="mt-3">
                                <!-- Butonlar -->
                                <a href="#" class="d-block py-1" data-bs-toggle="modal" data-bs-target="#purposeModal">Amaç ve Kapsam</a>
                                <a href="#" class="d-block py-1" data-bs-toggle="modal" data-bs-target="#writingModal">Yazım Kuralları</a>
                                <a href="#" class="d-block py-1" data-bs-toggle="modal" data-bs-target="#ethicsModal">Etik İlkeler</a>
                                <a href="#" class="d-block py-1" data-bs-toggle="modal" data-bs-target="#rulesModal">Dergi Kurulları</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amaç ve Kapsam Modal -->
                <div class="modal fade" id="purposeModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Amaç ve Kapsam</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>@Model.Purpose</p>
                                <p>@Model.Scope</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Yazım Kuralları Modal -->
                <div class="modal fade" id="writingModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Yazım Kuralları</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>@Model.WritingRules</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Etik İlkeler Modal -->
                <div class="modal fade" id="ethicsModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Etik İlkeler</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>@Model.JournalRules</p> <!-- Eğer Etik ayrı alan varsa DTO'ya eklenebilir -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dergi Kurulları Modal -->
                <div class="modal fade" id="rulesModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Dergi Kurulları</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>@Model.JournalRules</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="text-primary">Son Sayılar</h5>
                            @if (Model.Volumes?.Any() == true)
                            {
                                <ul class="list-unstyled">
                                    @foreach (var volume in Model.Volumes
                                                                    .OrderByDescending(v => v.Year)
                                                                    .Take(5))
                                    {
                                        <li>
                                            <a asp-controller="Magazines" asp-action="Volume" asp-route-id="@volume.Id" asp-route-magazineId="@Model.Id">
                                                @volume.Year - Cilt @volume.Title
                                            </a>

                                        </li>
                                    }
                                </ul>
                                <a asp-controller="Magazines" asp-action="TumSayilar" asp-route-magazineId="@Model.Id" class="btn btn-sm btn-outline-primary mt-2">
                                    Tüm Sayılar
                                </a>

                            }
                            else
                            {
                                <p>Henüz yayınlanmış sayı bulunmamaktadır.</p>
                            }
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

<style>
    .card {
        border-radius: 10px;
        border: none;
        transition: transform 0.2s;
    }

        .card:hover {
            transform: translateY(-3px);
        }

    .badge {
        font-size: 0.8rem;
        padding: 5px 10px;
    }

    a {
        color: #007bff;
        text-decoration: none;
    }

        a:hover {
            text-decoration: underline;
        }
</style>
